{"ast":null,"code":"export default {\n  name: 'Questionnaire',\n  data() {\n    return {\n      loading: false,\n      showCreateDialog: false,\n      showStatsDialog: false,\n      editMode: false,\n      currentRow: null,\n      currentStats: null,\n      // 筛选表单\n      filterForm: {\n        title: '',\n        status: '',\n        dateRange: []\n      },\n      // 分页数据\n      pagination: {\n        currentPage: 1,\n        pageSize: 20,\n        total: 0\n      },\n      // 表格数据\n      tableData: [{\n        id: 1,\n        title: '2024年春季教学质量调查',\n        description: '针对本学期教学质量和学生满意度的综合调查',\n        status: 'published',\n        questionCount: 15,\n        responseCount: 128,\n        startDate: '2024-01-15 09:00:00',\n        endDate: '2024-02-15 18:00:00',\n        createTime: '2024-01-10 14:30:00'\n      }, {\n        id: 2,\n        title: '一对一课程反馈调查',\n        description: '收集学生对一对一辅导课程的意见和建议',\n        status: 'ended',\n        questionCount: 10,\n        responseCount: 85,\n        startDate: '2024-01-01 09:00:00',\n        endDate: '2024-01-31 18:00:00',\n        createTime: '2024-01-01 09:00:00'\n      }],\n      // 表单数据\n      formData: {\n        title: '',\n        description: '',\n        dateRange: [],\n        targetGroup: [],\n        isAnonymous: true\n      },\n      // 表单验证规则\n      formRules: {\n        title: [{\n          required: true,\n          message: '请输入问卷标题',\n          trigger: 'blur'\n        }],\n        description: [{\n          required: true,\n          message: '请输入问卷描述',\n          trigger: 'blur'\n        }],\n        dateRange: [{\n          required: true,\n          message: '请选择调查时间',\n          trigger: 'change'\n        }],\n        targetGroup: [{\n          required: true,\n          message: '请选择目标群体',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  computed: {\n    dialogTitle() {\n      return this.editMode ? '编辑问卷' : '创建问卷';\n    }\n  },\n  mounted() {\n    this.loadData();\n  },\n  methods: {\n    // 加载数据\n    loadData() {\n      this.loading = true;\n      // 模拟API调用\n      setTimeout(() => {\n        this.pagination.total = this.tableData.length;\n        this.loading = false;\n      }, 500);\n    },\n    // 搜索\n    handleSearch() {\n      console.log('搜索参数:', this.filterForm);\n      this.loadData();\n    },\n    // 重置\n    handleReset() {\n      this.filterForm = {\n        title: '',\n        status: '',\n        dateRange: []\n      };\n      this.loadData();\n    },\n    // 分页\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.loadData();\n    },\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.loadData();\n    },\n    // 状态相关方法\n    getStatusType(status) {\n      const statusMap = {\n        draft: 'info',\n        published: 'success',\n        ended: 'warning'\n      };\n      return statusMap[status] || 'info';\n    },\n    getStatusText(status) {\n      const statusMap = {\n        draft: '草稿',\n        published: '发布中',\n        ended: '已结束'\n      };\n      return statusMap[status] || '未知';\n    },\n    // 操作方法\n    handleView(row) {\n      this.$message.info(`查看问卷：${row.title}`);\n    },\n    handleEdit(row) {\n      this.editMode = true;\n      this.currentRow = row;\n      this.formData = {\n        title: row.title,\n        description: row.description,\n        dateRange: [row.startDate, row.endDate],\n        targetGroup: ['students', 'teachers'],\n        isAnonymous: true\n      };\n      this.showCreateDialog = true;\n    },\n    handlePublish(row) {\n      this.$confirm(`确定要发布问卷\"${row.title}\"吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('问卷发布成功');\n        this.loadData();\n      });\n    },\n    handleEnd(row) {\n      this.$confirm(`确定要结束问卷\"${row.title}\"吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('问卷已结束');\n        this.loadData();\n      });\n    },\n    handleStats(row) {\n      this.currentStats = {\n        totalResponses: 128,\n        completionRate: 85,\n        averageTime: 12,\n        satisfactionScore: 4.2\n      };\n      this.showStatsDialog = true;\n    },\n    handleDelete(row) {\n      this.$confirm(`确定要删除问卷\"${row.title}\"吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('删除成功');\n        this.loadData();\n      });\n    },\n    // 表单提交\n    handleSubmit() {\n      this.$refs.questionnaireForm.validate(valid => {\n        if (valid) {\n          console.log('提交数据:', this.formData);\n          this.$message.success(this.editMode ? '更新成功' : '创建成功');\n          this.showCreateDialog = false;\n          this.loadData();\n        }\n      });\n    },\n    // 重置表单\n    resetForm() {\n      this.editMode = false;\n      this.currentRow = null;\n      this.formData = {\n        title: '',\n        description: '',\n        dateRange: [],\n        targetGroup: [],\n        isAnonymous: true\n      };\n      if (this.$refs.questionnaireForm) {\n        this.$refs.questionnaireForm.resetFields();\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}