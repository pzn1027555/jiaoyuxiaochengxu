{"ast":null,"code":"export default {\n  name: 'TabsContainer',\n  props: {\n    // 动态标签页数组\n    tabs: {\n      type: Array,\n      default: () => []\n    },\n    // 当前激活的标签\n    value: {\n      type: String,\n      default: 'dashboard'\n    },\n    // 是否显示添加标签按钮\n    showAddButton: {\n      type: Boolean,\n      default: false\n    },\n    // 最大标签数量\n    maxTabs: {\n      type: Number,\n      default: 10\n    }\n  },\n  data() {\n    return {\n      activeTab: this.value || 'dashboard',\n      // 动态标签页（不包括固定的首页标签）\n      dynamicTabs: [...this.tabs]\n    };\n  },\n  watch: {\n    value(newVal) {\n      this.activeTab = newVal;\n    },\n    tabs: {\n      handler(newTabs) {\n        this.dynamicTabs = [...newTabs];\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    // 处理标签点击\n    handleTabClick(tab) {\n      if (tab.disabled) return;\n      this.activeTab = tab.key;\n      this.$emit('input', tab.key);\n      this.$emit('tab-change', tab);\n\n      // 如果有路径，进行路由跳转\n      if (tab.path && this.$router) {\n        this.$router.push(tab.path);\n      }\n    },\n    // 处理标签关闭\n    handleTabClose(tab, index) {\n      // 触发关闭事件\n      this.$emit('tab-close', tab, index);\n\n      // 从动态标签数组中移除\n      this.dynamicTabs.splice(index, 1);\n\n      // 如果关闭的是当前激活标签，需要切换到其他标签\n      if (this.activeTab === tab.key) {\n        if (this.dynamicTabs.length > 0) {\n          // 优先选择右边的标签，如果没有则选择左边的\n          const nextTab = this.dynamicTabs[index] || this.dynamicTabs[index - 1];\n          if (nextTab) {\n            this.handleTabClick(nextTab);\n          } else {\n            // 如果没有其他动态标签，切换到首页\n            this.handleTabClick({\n              key: 'dashboard',\n              label: '我的课表',\n              path: '/dashboard'\n            });\n          }\n        } else {\n          // 切换到首页\n          this.handleTabClick({\n            key: 'dashboard',\n            label: '我的课表',\n            path: '/dashboard'\n          });\n        }\n      }\n    },\n    // 添加新标签\n    addTab(tab) {\n      // 检查是否已存在相同标签\n      const existingTab = this.dynamicTabs.find(t => t.key === tab.key);\n      if (existingTab) {\n        // 如果已存在，直接激活\n        this.handleTabClick(existingTab);\n        return;\n      }\n\n      // 检查最大标签数量限制\n      if (this.dynamicTabs.length >= this.maxTabs) {\n        this.$message.warning(`最多只能打开${this.maxTabs}个标签页`);\n        return;\n      }\n\n      // 添加新标签并激活\n      this.dynamicTabs.push(tab);\n      this.handleTabClick(tab);\n      this.$emit('tab-add', tab);\n    },\n    // 关闭所有标签（除了首页）\n    closeAllTabs() {\n      this.dynamicTabs = [];\n      this.handleTabClick({\n        key: 'dashboard',\n        label: '我的课表',\n        path: '/dashboard'\n      });\n      this.$emit('close-all');\n    },\n    // 关闭其他标签\n    closeOtherTabs(currentTab) {\n      this.dynamicTabs = this.dynamicTabs.filter(tab => tab.key === currentTab.key);\n      if (!this.dynamicTabs.find(tab => tab.key === this.activeTab) && this.activeTab !== 'dashboard') {\n        this.handleTabClick({\n          key: 'dashboard',\n          label: '我的课表',\n          path: '/dashboard'\n        });\n      }\n      this.$emit('close-others', currentTab);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}