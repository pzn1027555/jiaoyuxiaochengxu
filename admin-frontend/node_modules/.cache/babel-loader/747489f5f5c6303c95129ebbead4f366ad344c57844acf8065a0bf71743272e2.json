{"ast":null,"code":"import HorizontalMenu from './HorizontalMenu.vue';\nimport TabsContainer from './TabsContainer.vue';\nimport { findMenuByPath, getBreadcrumbData } from '@/config/menus';\nexport default {\n  name: 'HorizontalLayout',\n  components: {\n    HorizontalMenu,\n    TabsContainer\n  },\n  data() {\n    return {\n      showBreadcrumb: false,\n      // 使用标签页后隐藏面包屑\n      openTabs: [],\n      // 打开的标签页列表\n      currentTab: 'dashboard' // 当前激活的标签页\n    };\n  },\n  computed: {\n    userInfo() {\n      return this.$store.getters.getUser || {\n        username: 'Admin',\n        nickname: '管理员'\n      };\n    },\n    breadcrumbData() {\n      return getBreadcrumbData(this.$route.path);\n    }\n  },\n  watch: {\n    $route: {\n      handler(newRoute) {\n        this.addTabFromRoute(newRoute);\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    /**\n     * 处理用户命令\n     */\n    handleUserCommand(command) {\n      switch (command) {\n        case 'profile':\n          this.$message.info('个人设置功能开发中...');\n          break;\n        case 'logout':\n          this.handleLogout();\n          break;\n      }\n    },\n    /**\n     * 处理登出\n     */\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$store.dispatch('logout');\n        this.$message.success('退出登录成功');\n        this.$router.push('/login');\n      }).catch(() => {\n        // 取消操作\n      });\n    },\n    /**\n     * 从路由添加标签页\n     */\n    addTabFromRoute(route) {\n      if (!route.meta || !route.meta.title) return;\n      const tabKey = route.path;\n      const menuInfo = findMenuByPath(route.path);\n\n      // 创建标签页对象\n      const tab = {\n        key: tabKey,\n        label: route.meta.title,\n        path: route.path,\n        icon: this.getTabIcon(route.meta.module),\n        closable: route.path !== '/dashboard'\n      };\n\n      // 检查是否已存在\n      if (!this.openTabs.find(t => t.key === tabKey)) {\n        this.openTabs.push(tab);\n      }\n      this.currentTab = tabKey;\n    },\n    /**\n     * 获取标签页图标\n     */\n    getTabIcon(module) {\n      const iconMap = {\n        'data-research': 'el-icon-s-data',\n        'hr-admin': 'el-icon-user',\n        'xinghuo-plan': 'el-icon-star-on',\n        'exam-management': 'el-icon-document',\n        'competition-courses': 'el-icon-reading',\n        'system-management': 'el-icon-setting',\n        'finance-management': 'el-icon-money',\n        'operation-management': 'el-icon-pie-chart',\n        'content-management': 'el-icon-folder-opened',\n        'complaint-management': 'el-icon-warning-outline'\n      };\n      return iconMap[module] || 'el-icon-menu';\n    },\n    /**\n     * 处理标签页变化\n     */\n    handleTabChange(tab) {\n      this.currentTab = tab.key;\n      if (tab.path && tab.path !== this.$route.path) {\n        this.$router.push(tab.path);\n      }\n    },\n    /**\n     * 处理标签页关闭\n     */\n    handleTabClose(tab, index) {\n      this.openTabs.splice(index, 1);\n\n      // 如果关闭的是当前标签，需要切换到其他标签\n      if (this.currentTab === tab.key) {\n        if (this.openTabs.length > 0) {\n          // 优先选择右边的标签，如果没有则选择左边的\n          const nextTab = this.openTabs[index] || this.openTabs[index - 1];\n          this.handleTabChange(nextTab);\n        } else {\n          // 如果没有其他标签，切换到首页\n          this.$router.push('/dashboard');\n        }\n      }\n    },\n    /**\n     * 处理添加标签页\n     */\n    handleAddTab() {\n      this.$message.info('请通过菜单添加新标签页');\n    },\n    /**\n     * 关闭所有标签页\n     */\n    handleCloseAll() {\n      this.openTabs = [];\n      this.currentTab = 'dashboard';\n      this.$router.push('/dashboard');\n    },\n    /**\n     * 关闭其他标签页\n     */\n    handleCloseOthers(currentTab) {\n      this.openTabs = this.openTabs.filter(tab => tab.key === currentTab.key);\n      if (this.currentTab !== currentTab.key) {\n        this.handleTabChange(currentTab);\n      }\n    }\n  }\n};","map":{"version":3,"names":["HorizontalMenu","TabsContainer","findMenuByPath","getBreadcrumbData","name","components","data","showBreadcrumb","openTabs","currentTab","computed","userInfo","$store","getters","getUser","username","nickname","breadcrumbData","$route","path","watch","handler","newRoute","addTabFromRoute","immediate","methods","handleUserCommand","command","$message","info","handleLogout","$confirm","confirmButtonText","cancelButtonText","type","then","dispatch","success","$router","push","catch","route","meta","title","tabKey","menuInfo","tab","key","label","icon","getTabIcon","module","closable","find","t","iconMap","handleTabChange","handleTabClose","index","splice","length","nextTab","handleAddTab","handleCloseAll","handleCloseOthers","filter"],"sources":["src/components/HorizontalLayout.vue"],"sourcesContent":["<template>\n  <div class=\"horizontal-layout\">\n    <!-- 顶部导航栏 -->\n    <div class=\"layout-header\">\n      <!-- 品牌区域 -->\n      <div class=\"brand-area\">\n        <div class=\"logo\">\n          <i class=\"el-icon-reading\" />\n          <span class=\"brand-text\">管理系统平台</span>\n        </div>\n      </div>\n      \n      <!-- 水平菜单区域 -->\n      <div class=\"menu-area\">\n        <HorizontalMenu />\n      </div>\n      \n      <!-- 用户信息区域 -->\n      <div class=\"user-area\">\n        <!-- 通知 -->\n        <div class=\"notification-area\">\n          <el-badge :value=\"3\" class=\"notification-badge\">\n            <el-button type=\"text\" icon=\"el-icon-bell\" class=\"notification-btn\" />\n          </el-badge>\n        </div>\n        \n        <!-- 用户下拉菜单 -->\n        <el-dropdown @command=\"handleUserCommand\" trigger=\"click\">\n          <span class=\"user-info\">\n            <el-avatar \n              :size=\"32\" \n              :src=\"userInfo.avatar\" \n              icon=\"el-icon-user-solid\"\n              class=\"user-avatar\"\n            />\n            <span class=\"username\">欢迎您，{{ userInfo.nickname || userInfo.username || 'George Li' }}</span>\n            <i class=\"el-icon-arrow-down\" />\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item command=\"profile\">\n              <i class=\"el-icon-user\"></i> 个人设置\n            </el-dropdown-item>\n            <el-dropdown-item command=\"logout\" divided>\n              <i class=\"el-icon-switch-button\"></i> 退出登录\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </div>\n    </div>\n    \n    <!-- 面包屑导航 -->\n    <div class=\"breadcrumb-area\" v-if=\"showBreadcrumb\">\n      <div class=\"breadcrumb-container\">\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item :to=\"{ path: '/dashboard' }\">首页</el-breadcrumb-item>\n          <el-breadcrumb-item v-if=\"breadcrumbData.parent\">\n            {{ breadcrumbData.parent.name }}\n          </el-breadcrumb-item>\n          <el-breadcrumb-item v-if=\"breadcrumbData.current\">\n            {{ breadcrumbData.current.name }}\n          </el-breadcrumb-item>\n        </el-breadcrumb>\n        \n        <!-- 页面操作按钮 -->\n        <div class=\"page-actions\">\n          <slot name=\"page-actions\" />\n        </div>\n      </div>\n    </div>\n    \n    <!-- 主内容区域 -->\n    <div class=\"layout-main\">\n      <!-- 标签页容器 -->\n      <TabsContainer\n        :tabs=\"openTabs\"\n        :value=\"currentTab\"\n        :show-add-button=\"false\"\n        :max-tabs=\"8\"\n        @input=\"currentTab = $event\"\n        @tab-change=\"handleTabChange\"\n        @tab-close=\"handleTabClose\"\n        @add-tab=\"handleAddTab\"\n        @close-all=\"handleCloseAll\"\n        @close-others=\"handleCloseOthers\"\n      >\n        <template #default=\"{ activeTab }\">\n          <!-- 页面内容 -->\n          <div class=\"page-content\">\n            <slot />\n          </div>\n        </template>\n      </TabsContainer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HorizontalMenu from './HorizontalMenu.vue'\nimport TabsContainer from './TabsContainer.vue'\nimport { findMenuByPath, getBreadcrumbData } from '@/config/menus'\n\nexport default {\n  name: 'HorizontalLayout',\n  components: {\n    HorizontalMenu,\n    TabsContainer\n  },\n  data() {\n    return {\n      showBreadcrumb: false, // 使用标签页后隐藏面包屑\n      openTabs: [], // 打开的标签页列表\n      currentTab: 'dashboard' // 当前激活的标签页\n    }\n  },\n  computed: {\n    userInfo() {\n      return this.$store.getters.getUser || { username: 'Admin', nickname: '管理员' }\n    },\n    breadcrumbData() {\n      return getBreadcrumbData(this.$route.path)\n    }\n  },\n  watch: {\n    $route: {\n      handler(newRoute) {\n        this.addTabFromRoute(newRoute)\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    /**\n     * 处理用户命令\n     */\n    handleUserCommand(command) {\n      switch (command) {\n        case 'profile':\n          this.$message.info('个人设置功能开发中...')\n          break\n        case 'logout':\n          this.handleLogout()\n          break\n      }\n    },\n    \n    /**\n     * 处理登出\n     */\n    handleLogout() {\n      this.$confirm('确定要退出登录吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$store.dispatch('logout')\n        this.$message.success('退出登录成功')\n        this.$router.push('/login')\n      }).catch(() => {\n        // 取消操作\n      })\n    },\n    \n    /**\n     * 从路由添加标签页\n     */\n    addTabFromRoute(route) {\n      if (!route.meta || !route.meta.title) return\n      \n      const tabKey = route.path\n      const menuInfo = findMenuByPath(route.path)\n      \n      // 创建标签页对象\n      const tab = {\n        key: tabKey,\n        label: route.meta.title,\n        path: route.path,\n        icon: this.getTabIcon(route.meta.module),\n        closable: route.path !== '/dashboard'\n      }\n      \n      // 检查是否已存在\n      if (!this.openTabs.find(t => t.key === tabKey)) {\n        this.openTabs.push(tab)\n      }\n      \n      this.currentTab = tabKey\n    },\n    \n    /**\n     * 获取标签页图标\n     */\n    getTabIcon(module) {\n      const iconMap = {\n        'data-research': 'el-icon-s-data',\n        'hr-admin': 'el-icon-user',\n        'xinghuo-plan': 'el-icon-star-on',\n        'exam-management': 'el-icon-document',\n        'competition-courses': 'el-icon-reading',\n        'system-management': 'el-icon-setting',\n        'finance-management': 'el-icon-money',\n        'operation-management': 'el-icon-pie-chart',\n        'content-management': 'el-icon-folder-opened',\n        'complaint-management': 'el-icon-warning-outline'\n      }\n      return iconMap[module] || 'el-icon-menu'\n    },\n    \n    /**\n     * 处理标签页变化\n     */\n    handleTabChange(tab) {\n      this.currentTab = tab.key\n      if (tab.path && tab.path !== this.$route.path) {\n        this.$router.push(tab.path)\n      }\n    },\n    \n    /**\n     * 处理标签页关闭\n     */\n    handleTabClose(tab, index) {\n      this.openTabs.splice(index, 1)\n      \n      // 如果关闭的是当前标签，需要切换到其他标签\n      if (this.currentTab === tab.key) {\n        if (this.openTabs.length > 0) {\n          // 优先选择右边的标签，如果没有则选择左边的\n          const nextTab = this.openTabs[index] || this.openTabs[index - 1]\n          this.handleTabChange(nextTab)\n        } else {\n          // 如果没有其他标签，切换到首页\n          this.$router.push('/dashboard')\n        }\n      }\n    },\n    \n    /**\n     * 处理添加标签页\n     */\n    handleAddTab() {\n      this.$message.info('请通过菜单添加新标签页')\n    },\n    \n    /**\n     * 关闭所有标签页\n     */\n    handleCloseAll() {\n      this.openTabs = []\n      this.currentTab = 'dashboard'\n      this.$router.push('/dashboard')\n    },\n    \n    /**\n     * 关闭其他标签页\n     */\n    handleCloseOthers(currentTab) {\n      this.openTabs = this.openTabs.filter(tab => tab.key === currentTab.key)\n      if (this.currentTab !== currentTab.key) {\n        this.handleTabChange(currentTab)\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.horizontal-layout {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: #f0f2f5;\n}\n\n/* 顶部导航栏 */\n.layout-header {\n  background: #ffffff;\n  display: flex;\n  align-items: center;\n  min-height: 64px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  position: relative;\n  z-index: 1000;\n}\n\n/* 品牌区域 */\n.brand-area {\n  flex-shrink: 0;\n  padding: 0 24px;\n  border-right: 1px solid #e8e8e8;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: #2c3e50;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.logo i {\n  font-size: 24px;\n  color: #1890ff;\n}\n\n.brand-text {\n  white-space: nowrap;\n}\n\n/* 菜单区域 */\n.menu-area {\n  flex: 1;\n  min-width: 0;\n}\n\n/* 用户信息区域 */\n.user-area {\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  padding: 0 24px;\n  gap: 16px;\n}\n\n.notification-area {\n  display: flex;\n  align-items: center;\n}\n\n.notification-btn {\n  color: #606266;\n  font-size: 18px;\n  padding: 8px;\n  border-radius: 4px;\n  transition: all 0.3s;\n}\n\n.notification-btn:hover {\n  color: #1890ff;\n  background: #f0f9ff;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 6px 12px;\n  border-radius: 6px;\n  transition: background-color 0.3s;\n  color: #606266;\n}\n\n.user-info:hover {\n  background-color: #f5f7fa;\n}\n\n.user-avatar {\n  border: 2px solid #e4e7ed;\n}\n\n.username {\n  margin: 0 8px;\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n}\n\n/* 面包屑区域 */\n.breadcrumb-area {\n  background: #ffffff;\n  border-bottom: 1px solid #e8e8e8;\n  padding: 12px 0;\n}\n\n.breadcrumb-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.page-actions {\n  display: flex;\n  gap: 8px;\n}\n\n/* 主内容区域 */\n.layout-main {\n  flex: 1;\n  overflow-y: auto;\n  background: #f0f2f5;\n}\n\n.main-container {\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.page-content {\n  flex: 1;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 24px;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n/* 页面底部 */\n.layout-footer {\n  background: #ffffff;\n  border-top: 1px solid #e8e8e8;\n  padding: 16px 0;\n  margin-top: auto;\n}\n\n.footer-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 24px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #909399;\n  font-size: 14px;\n}\n\n.footer-links {\n  display: flex;\n  gap: 16px;\n}\n\n.footer-link {\n  color: #909399;\n  text-decoration: none;\n  transition: color 0.3s;\n}\n\n.footer-link:hover {\n  color: #1890ff;\n}\n\n/* 响应式设计 */\n@media (max-width: 1024px) {\n  .brand-area {\n    padding: 0 16px;\n  }\n  \n  .brand-text {\n    display: none;\n  }\n  \n  .user-area {\n    padding: 0 16px;\n  }\n  \n  .username {\n    display: none;\n  }\n  \n  .breadcrumb-container,\n  .page-content,\n  .footer-content {\n    padding-left: 16px;\n    padding-right: 16px;\n  }\n}\n\n@media (max-width: 768px) {\n  .layout-header {\n    min-height: 56px;\n  }\n  \n  .logo {\n    font-size: 16px;\n  }\n  \n  .logo i {\n    font-size: 20px;\n  }\n  \n  .breadcrumb-area {\n    padding: 8px 0;\n  }\n  \n  .page-content {\n    padding: 16px;\n  }\n  \n  .footer-content {\n    flex-direction: column;\n    gap: 8px;\n    text-align: center;\n  }\n  \n  .footer-links {\n    justify-content: center;\n  }\n}\n\n/* 滚动条样式 */\n.layout-main::-webkit-scrollbar {\n  width: 6px;\n}\n\n.layout-main::-webkit-scrollbar-track {\n  background: #f1f1f1;\n}\n\n.layout-main::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n\n.layout-main::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}