{"ast":null,"code":"import axios from 'axios';\nimport { Message } from 'element-ui';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  // 添加token到请求头\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  const res = response.data;\n\n  // 如果返回的状态码不是200，则显示错误信息\n  if (res.code !== 200) {\n    Message({\n      message: res.message || '请求失败',\n      type: 'error',\n      duration: 5 * 1000\n    });\n\n    // 如果是401，跳转到登录页\n    if (res.code === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(new Error(res.message || '请求失败'));\n  } else {\n    return res;\n  }\n}, error => {\n  console.error('API请求错误:', error);\n  let message = '请求失败';\n  if (error.response) {\n    message = error.response.data?.message || `请求失败(${error.response.status})`;\n  } else if (error.request) {\n    message = '网络连接失败';\n  }\n  Message({\n    message: message,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\n\n// API接口\nconst userApi = {\n  // 用户登录\n  login(username, password) {\n    return api.post('/user/login', {\n      username,\n      password\n    });\n  },\n  // 获取所有用户\n  getUsers() {\n    return api.get('/user');\n  },\n  // 分页获取用户\n  getUsersByPage(page = 1, size = 10) {\n    return api.get('/user/page', {\n      params: {\n        page,\n        size\n      }\n    });\n  },\n  // 根据ID获取用户\n  getUserById(id) {\n    return api.get(`/user/${id}`);\n  },\n  // 创建用户\n  createUser(user) {\n    return api.post('/user', user);\n  },\n  // 更新用户\n  updateUser(id, user) {\n    return api.put(`/user/${id}`, user);\n  },\n  // 删除用户\n  deleteUser(id) {\n    return api.delete(`/user/${id}`);\n  },\n  // 搜索用户\n  searchUsers(params) {\n    return api.get('/user/search', {\n      params\n    });\n  },\n  // 获取用户总数\n  getUserCount() {\n    return api.get('/user/count');\n  }\n};\nconst testApi = {\n  // 健康检查\n  health() {\n    return api.get('/test/health');\n  },\n  // Hello测试\n  hello() {\n    return api.get('/test/hello');\n  }\n};\n\n// 导入新的API模块\nimport { teacherApi } from './teacher';\nimport { studentApi } from './student';\nimport courseApi from './course';\nimport categoryApi from './category';\nexport default {\n  user: userApi,\n  test: testApi,\n  teacher: teacherApi,\n  student: studentApi,\n  course: courseApi,\n  category: categoryApi\n};\n\n// 单独导出各API模块，便于直接引用\nexport { teacherApi } from './teacher';\nexport { studentApi } from './student';\nexport { default as courseApi } from './course';\nexport { default as categoryApi } from './category';","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}