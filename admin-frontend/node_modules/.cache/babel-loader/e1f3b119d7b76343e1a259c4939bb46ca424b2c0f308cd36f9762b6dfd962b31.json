{"ast":null,"code":"export default {\n  name: 'LeaveRequest',\n  data() {\n    return {\n      loading: false,\n      showCreateDialog: false,\n      showApprovalDialog: false,\n      editMode: false,\n      currentRow: null,\n      // 筛选表单\n      filterForm: {\n        studentName: '',\n        type: '',\n        status: '',\n        dateRange: []\n      },\n      // 分页数据\n      pagination: {\n        currentPage: 1,\n        pageSize: 20,\n        total: 0\n      },\n      // 表格数据\n      tableData: [{\n        id: 1,\n        studentName: '张三',\n        studentId: 'S2024001',\n        type: 'online_class',\n        subject: '数学',\n        leaveDate: '2024-01-15',\n        reason: '身体不适，需要休息',\n        status: 'pending',\n        createTime: '2024-01-10 14:30:00'\n      }, {\n        id: 2,\n        studentName: '李四',\n        studentId: 'S2024002',\n        type: 'mock_exam',\n        subject: 'IGCSE数学模考',\n        leaveDate: '2024-01-20',\n        reason: '家中有急事需要处理',\n        status: 'approved',\n        createTime: '2024-01-12 09:15:00'\n      }],\n      // 表单数据\n      formData: {\n        studentName: '',\n        studentId: '',\n        type: '',\n        subject: '',\n        leaveDate: '',\n        reason: ''\n      },\n      // 表单验证规则\n      formRules: {\n        studentName: [{\n          required: true,\n          message: '请输入学生姓名',\n          trigger: 'blur'\n        }],\n        studentId: [{\n          required: true,\n          message: '请输入学号',\n          trigger: 'blur'\n        }],\n        type: [{\n          required: true,\n          message: '请选择申请类型',\n          trigger: 'change'\n        }],\n        subject: [{\n          required: true,\n          message: '请输入科目或考试名称',\n          trigger: 'blur'\n        }],\n        leaveDate: [{\n          required: true,\n          message: '请选择请假日期',\n          trigger: 'change'\n        }],\n        reason: [{\n          required: true,\n          message: '请输入请假原因',\n          trigger: 'blur'\n        }]\n      },\n      // 审核表单\n      approvalForm: {\n        result: 'approved',\n        comment: ''\n      }\n    };\n  },\n  computed: {\n    dialogTitle() {\n      return this.editMode ? '编辑申请' : '新增申请';\n    }\n  },\n  mounted() {\n    this.loadData();\n  },\n  methods: {\n    // 加载数据\n    loadData() {\n      this.loading = true;\n      // 模拟API调用\n      setTimeout(() => {\n        this.pagination.total = this.tableData.length;\n        this.loading = false;\n      }, 500);\n    },\n    // 搜索\n    handleSearch() {\n      console.log('搜索参数:', this.filterForm);\n      this.loadData();\n    },\n    // 重置\n    handleReset() {\n      this.filterForm = {\n        studentName: '',\n        type: '',\n        status: '',\n        dateRange: []\n      };\n      this.loadData();\n    },\n    // 分页\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.loadData();\n    },\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.loadData();\n    },\n    // 状态相关方法\n    getStatusType(status) {\n      const statusMap = {\n        pending: 'warning',\n        approved: 'success',\n        rejected: 'danger'\n      };\n      return statusMap[status] || 'info';\n    },\n    getStatusText(status) {\n      const statusMap = {\n        pending: '待审核',\n        approved: '已通过',\n        rejected: '已拒绝'\n      };\n      return statusMap[status] || '未知';\n    },\n    // 操作方法\n    handleView(row) {\n      this.$message.info(`查看申请：${row.studentName}`);\n    },\n    handleEdit(row) {\n      this.editMode = true;\n      this.currentRow = row;\n      this.formData = {\n        ...row\n      };\n      this.showCreateDialog = true;\n    },\n    handleApprove(row) {\n      this.currentRow = row;\n      this.approvalForm = {\n        result: 'approved',\n        comment: ''\n      };\n      this.showApprovalDialog = true;\n    },\n    handleDelete(row) {\n      this.$confirm(`确定要删除 ${row.studentName} 的申请吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('删除成功');\n        this.loadData();\n      });\n    },\n    // 表单提交\n    handleSubmit() {\n      this.$refs.leaveRequestForm.validate(valid => {\n        if (valid) {\n          console.log('提交数据:', this.formData);\n          this.$message.success(this.editMode ? '更新成功' : '创建成功');\n          this.showCreateDialog = false;\n          this.loadData();\n        }\n      });\n    },\n    // 审核提交\n    handleApprovalSubmit() {\n      console.log('审核结果:', this.approvalForm);\n      this.$message.success('审核完成');\n      this.showApprovalDialog = false;\n      this.loadData();\n    },\n    // 重置表单\n    resetForm() {\n      this.editMode = false;\n      this.currentRow = null;\n      this.formData = {\n        studentName: '',\n        studentId: '',\n        type: '',\n        subject: '',\n        leaveDate: '',\n        reason: ''\n      };\n      if (this.$refs.leaveRequestForm) {\n        this.$refs.leaveRequestForm.resetFields();\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}