{"ast":null,"code":"export default {\n  name: 'Exams',\n  data() {\n    return {\n      loading: false,\n      showCreateDialog: false,\n      showStudentsDialog: false,\n      showResultsDialog: false,\n      editMode: false,\n      currentRow: null,\n      currentExamStudents: [],\n      currentExamResults: null,\n      // 筛选表单\n      filterForm: {\n        examName: '',\n        examType: '',\n        subject: '',\n        status: '',\n        dateRange: []\n      },\n      // 分页数据\n      pagination: {\n        currentPage: 1,\n        pageSize: 20,\n        total: 0\n      },\n      // 表格数据\n      tableData: [{\n        id: 1,\n        examName: 'IGCSE数学期末考试',\n        examType: 'igcse',\n        subject: '数学',\n        examDate: '2024-01-20',\n        duration: 120,\n        totalStudents: 25,\n        submittedCount: 25,\n        averageScore: 78.5,\n        status: 'completed',\n        createTime: '2024-01-10 14:30:00'\n      }, {\n        id: 2,\n        examName: 'A-Level物理模拟考',\n        examType: 'a-level',\n        subject: 'AS物理',\n        examDate: '2024-01-25',\n        duration: 90,\n        totalStudents: 18,\n        submittedCount: 0,\n        averageScore: null,\n        status: 'pending',\n        createTime: '2024-01-15 09:15:00'\n      }],\n      // 学生列表\n      studentList: [{\n        id: 1,\n        name: '陈舍'\n      }, {\n        id: 2,\n        name: '孙小涵'\n      }, {\n        id: 3,\n        name: 'Bella'\n      }, {\n        id: 4,\n        name: 'Duoduo'\n      }, {\n        id: 5,\n        name: 'Camellia'\n      }],\n      // 表单数据\n      formData: {\n        examName: '',\n        examType: '',\n        subject: '',\n        examDate: '',\n        duration: 120,\n        description: '',\n        students: []\n      },\n      // 表单验证规则\n      formRules: {\n        examName: [{\n          required: true,\n          message: '请输入考试名称',\n          trigger: 'blur'\n        }],\n        examType: [{\n          required: true,\n          message: '请选择考试类型',\n          trigger: 'change'\n        }],\n        subject: [{\n          required: true,\n          message: '请选择科目',\n          trigger: 'change'\n        }],\n        examDate: [{\n          required: true,\n          message: '请选择考试时间',\n          trigger: 'change'\n        }],\n        duration: [{\n          required: true,\n          message: '请输入考试时长',\n          trigger: 'blur'\n        }],\n        students: [{\n          required: true,\n          message: '请选择参考学生',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  computed: {\n    dialogTitle() {\n      return this.editMode ? '编辑考试' : '创建考试';\n    }\n  },\n  mounted() {\n    this.loadData();\n  },\n  methods: {\n    // 加载数据\n    loadData() {\n      this.loading = true;\n      // 模拟API调用\n      setTimeout(() => {\n        this.pagination.total = this.tableData.length;\n        this.loading = false;\n      }, 500);\n    },\n    // 搜索\n    handleSearch() {\n      console.log('搜索参数:', this.filterForm);\n      this.loadData();\n    },\n    // 重置\n    handleReset() {\n      this.filterForm = {\n        examName: '',\n        examType: '',\n        subject: '',\n        status: '',\n        dateRange: []\n      };\n      this.loadData();\n    },\n    // 分页\n    handleSizeChange(val) {\n      this.pagination.pageSize = val;\n      this.loadData();\n    },\n    handleCurrentChange(val) {\n      this.pagination.currentPage = val;\n      this.loadData();\n    },\n    // 状态相关方法\n    getExamTypeColor(type) {\n      const colorMap = {\n        igcse: 'primary',\n        'a-level': 'success',\n        mock: 'warning',\n        stage: 'info'\n      };\n      return colorMap[type] || 'info';\n    },\n    getExamTypeText(type) {\n      const textMap = {\n        igcse: 'IGCSE',\n        'a-level': 'A-Level',\n        mock: '模拟考试',\n        stage: '阶段测试'\n      };\n      return textMap[type] || '未知';\n    },\n    getStatusType(status) {\n      const statusMap = {\n        pending: 'warning',\n        ongoing: 'primary',\n        completed: 'success',\n        cancelled: 'danger'\n      };\n      return statusMap[status] || 'info';\n    },\n    getStatusText(status) {\n      const statusMap = {\n        pending: '未开始',\n        ongoing: '进行中',\n        completed: '已完成',\n        cancelled: '已取消'\n      };\n      return statusMap[status] || '未知';\n    },\n    // 操作方法\n    handleView(row) {\n      this.$message.info(`查看考试：${row.examName}`);\n    },\n    handleEdit(row) {\n      this.editMode = true;\n      this.currentRow = row;\n      this.formData = {\n        examName: row.examName,\n        examType: row.examType,\n        subject: row.subject,\n        examDate: row.examDate + ' 09:00:00',\n        duration: row.duration,\n        description: '',\n        students: [1, 2, 3]\n      };\n      this.showCreateDialog = true;\n    },\n    handleStudents(row) {\n      this.currentExamStudents = [{\n        studentName: '陈舍',\n        studentId: 'S001',\n        class: '数学A班',\n        submitTime: '2024-01-20 10:30:00',\n        score: 85,\n        status: 'submitted'\n      }, {\n        studentName: '孙小涵',\n        studentId: 'S002',\n        class: '数学A班',\n        submitTime: '2024-01-20 10:25:00',\n        score: 92,\n        status: 'submitted'\n      }];\n      this.showStudentsDialog = true;\n    },\n    handleResults(row) {\n      this.currentExamResults = {\n        totalStudents: 25,\n        averageScore: 78.5,\n        highestScore: 95,\n        passRate: 88\n      };\n      this.showResultsDialog = true;\n    },\n    handleGrading(row) {\n      this.$message.info(`为${row.studentName}评分`);\n    },\n    handleDelete(row) {\n      this.$confirm(`确定要删除考试\"${row.examName}\"吗？`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message.success('删除成功');\n        this.loadData();\n      });\n    },\n    // 表单提交\n    handleSubmit() {\n      this.$refs.examForm.validate(valid => {\n        if (valid) {\n          console.log('提交数据:', this.formData);\n          this.$message.success(this.editMode ? '更新成功' : '创建成功');\n          this.showCreateDialog = false;\n          this.loadData();\n        }\n      });\n    },\n    // 重置表单\n    resetForm() {\n      this.editMode = false;\n      this.currentRow = null;\n      this.formData = {\n        examName: '',\n        examType: '',\n        subject: '',\n        examDate: '',\n        duration: 120,\n        description: '',\n        students: []\n      };\n      if (this.$refs.examForm) {\n        this.$refs.examForm.resetFields();\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}