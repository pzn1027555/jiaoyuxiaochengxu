"use strict";(self["webpackChunkadmin_frontend"]=self["webpackChunkadmin_frontend"]||[]).push([[300],{5042:function(e,t,a){a.d(t,{q:function(){return s},y:function(){return r}});var l=a(6879);function s(e){return(0,l.A)({url:"/schedule/list",method:"get",params:e})}function r(e){return(0,l.A)({url:"/admin/schedule/big-class/plan",method:"post",data:e})}},8300:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("div",{staticClass:"content-box"},[t("div",{staticClass:"toolbar"},[t("el-input",{staticClass:"mr8",attrs:{placeholder:"课程标题/教师/学生",clearable:""},on:{clear:e.handleSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}}),t("el-select",{staticClass:"mr8",attrs:{placeholder:"班型",clearable:""},on:{change:e.handleSearch},model:{value:e.query.classType,callback:function(t){e.$set(e.query,"classType",t)},expression:"query.classType"}},[t("el-option",{attrs:{label:"一对一",value:"one_to_one"}}),t("el-option",{attrs:{label:"小班课",value:"small_class"}}),t("el-option",{attrs:{label:"大班课",value:"big_class"}}),t("el-option",{attrs:{label:"体验课",value:"trial"}})],1),t("el-date-picker",{staticClass:"mr8",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleSearch},model:{value:e.query.dateRange,callback:function(t){e.$set(e.query,"dateRange",t)},expression:"query.dateRange"}}),t("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"title",label:"课程标题","min-width":"200"}}),t("el-table-column",{attrs:{prop:"teacherName",label:"教师",width:"140"}}),t("el-table-column",{attrs:{prop:"studentNames",label:"学生","min-width":"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s((a.row.studentNames||[]).join("、")))])]}}])}),t("el-table-column",{attrs:{prop:"classTypeText",label:"班型",width:"100"}}),t("el-table-column",{attrs:{prop:"startTime",label:"开始时间",width:"160"}}),t("el-table-column",{attrs:{prop:"endTime",label:"结束时间",width:"160"}}),t("el-table-column",{attrs:{prop:"studentCount",label:"人数",width:"80"}})],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total",total:e.total,"page-size":e.query.pageSize,"current-page":e.query.pageNum},on:{"update:currentPage":function(t){return e.$set(e.query,"pageNum",t)},"update:current-page":function(t){return e.$set(e.query,"pageNum",t)},"current-change":e.loadData,"size-change":e.handleSizeChange}})],1)],1)])},s=[],r=a(5042),n={name:"CourseList",data(){return{query:{pageNum:1,pageSize:10,keyword:"",classType:"",dateRange:[]},list:[],total:0,loading:!1}},created(){this.loadData()},methods:{handleSearch(){this.query.pageNum=1,this.loadData()},handleSizeChange(e){this.query.pageSize=e,this.loadData()},async loadData(){this.loading=!0;try{const e={pageNum:this.query.pageNum,pageSize:this.query.pageSize,keyword:this.query.keyword||void 0,classType:this.query.classType||void 0,startDate:this.query.dateRange&&this.query.dateRange[0]?this.formatDate(this.query.dateRange[0]):void 0,endDate:this.query.dateRange&&this.query.dateRange[1]?this.formatDate(this.query.dateRange[1]):void 0},t=await(0,r.q)(e),a=t&&(t.data||t.result||t),l=a&&(a.list||a.items)||[];this.total=a&&(a.total||a.totalCount||0),this.list=l.map(e=>({id:e.id,title:e.title,teacherName:e.teacherName,studentNames:Array.isArray(e.studentNames)?e.studentNames:"string"===typeof e.studentNames&&e.studentNames?e.studentNames.split(","):[],classType:e.classType,classTypeText:this.classTypeText(e.classType),startTime:(e.startTime||"").toString().replace("T"," ").slice(0,16),endTime:(e.endTime||"").toString().replace("T"," ").slice(0,16),studentCount:"number"===typeof e.studentCount?e.studentCount:e.studentNames?e.studentNames.length:0}))}catch(e){this.$message.error("加载失败")}finally{this.loading=!1}},formatDate(e){const t=e instanceof Date?e:new Date(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${a}-${l}-${s}`},classTypeText(e){return"one_to_one"===e?"一对一":"small_class"===e?"小班课":"big_class"===e?"大班课":"trial"===e?"体验课":e||"-"}}},i=n,o=a(1656),u=(0,o.A)(i,l,s,!1,null,"3d890e22",null),d=u.exports}}]);