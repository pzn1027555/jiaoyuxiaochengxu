"use strict";(self["webpackChunkadmin_frontend"]=self["webpackChunkadmin_frontend"]||[]).push([[33],{5033:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[e("el-card",{attrs:{shadow:"never"}},[e("div",{staticClass:"form-row"},[e("el-input",{staticStyle:{width:"360px","margin-right":"12px"},attrs:{placeholder:"招聘标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.form.id?"保存修改":"新建发布"))]),e("el-button",{on:{click:t.reset}},[t._v("重置")]),e("el-button",{on:{click:t.loadList}},[t._v("刷新")])],1),e("el-input",{attrs:{type:"textarea",rows:6,placeholder:"招聘简述（1000字以内）"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),e("el-table",{staticStyle:{width:"100%","margin-top":"12px"},attrs:{data:t.list,stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"title",label:"标题"}}),e("el-table-column",{attrs:{prop:"publishTime",label:"发布时间",width:"180"}}),e("el-table-column",{attrs:{label:"上架",width:"100"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){return t.toggleStatus(s.row)}},model:{value:s.row.status,callback:function(e){t.$set(s.row,"status",e)},expression:"scope.row.status"}})]}}])}),e("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.edit(s.row)}}},[t._v("编辑")]),e("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(e){return t.remove(s.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},a=[],l=s(6879),n={name:"PostPublish",data(){return{form:{id:null,title:"",description:"",bannerUrl:""},list:[]}},created(){this.loadList()},methods:{async save(){const{id:t,title:e,description:s,bannerUrl:i}=this.form;if(!e)return this.$message.warning("请输入标题");t?await(0,l.A)({url:`/admin/employment-post/${t}`,method:"put",data:{title:e,description:s,bannerUrl:i,status:1}}):await(0,l.A)({url:"/admin/employment-post/create",method:"post",data:{title:e,description:s,bannerUrl:i,status:1}}),this.$message.success("保存成功"),this.reset(),this.loadList()},async loadList(){const t=await(0,l.A)({url:"/mini/employment/list",method:"get"});this.list=t.data||t||[]},async toggleStatus(t){await(0,l.A)({url:`/admin/employment-post/${t.id}`,method:"put",data:{title:t.title,description:t.description,bannerUrl:t.bannerUrl||"",status:t.status}}),this.$message.success("状态已更新")},edit(t){this.form={id:t.id,title:t.title,description:t.description,bannerUrl:t.bannerUrl||""}},async remove(t){await(0,l.A)({url:`/admin/employment-post/${t.id}`,method:"delete"}),this.$message.success("删除成功"),this.loadList()},reset(){this.form={id:null,title:"",description:"",bannerUrl:""}}}},r=n,o=s(1656),c=(0,o.A)(r,i,a,!1,null,"c7ebead8",null),d=c.exports}}]);