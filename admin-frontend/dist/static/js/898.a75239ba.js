"use strict";(self["webpackChunkadmin_frontend"]=self["webpackChunkadmin_frontend"]||[]).push([[898],{4898:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("div",{staticClass:"content-box"},[t("h2",[e._v("教师评级管理")]),t("div",{staticStyle:{"margin-bottom":"14px"}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openDialog()}}},[e._v("新增等级")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"levelKey",label:"等级键",width:"160"}}),t("el-table-column",{attrs:{prop:"displayName",label:"等级名称",width:"160"}}),t("el-table-column",{attrs:{label:"课时费(元)",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("¥"+e._s(t.row.hourlyRate))]}}])}),t("el-table-column",{attrs:{label:"佣金比例(%)",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.commissionRate))]}}])}),t("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{type:1===r.row.isEnabled?"success":"info"}},[e._v(" "+e._s(1===r.row.isEnabled?"启用":"禁用")+" ")])]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openDialog(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"480px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"等级键"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择等级键",disabled:!!e.form.id},model:{value:e.form.levelKey,callback:function(t){e.$set(e.form,"levelKey",t)},expression:"form.levelKey"}},[t("el-option",{attrs:{label:"初级 (junior)",value:"junior"}}),t("el-option",{attrs:{label:"中级 (intermediate)",value:"intermediate"}}),t("el-option",{attrs:{label:"高级 (senior)",value:"senior"}}),t("el-option",{attrs:{label:"专家 (expert)",value:"expert"}})],1)],1),t("el-form-item",{attrs:{label:"等级名称"}},[t("el-input",{attrs:{placeholder:"如：初级/中级/高级/专家"},model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}})],1),t("el-form-item",{attrs:{label:"课时费(元)"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:10,precision:2},model:{value:e.form.hourlyRate,callback:function(t){e.$set(e.form,"hourlyRate",t)},expression:"form.hourlyRate"}})],1),t("el-form-item",{attrs:{label:"佣金比例(%)"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:100,step:.5,precision:2},model:{value:e.form.commissionRate,callback:function(t){e.$set(e.form,"commissionRate",t)},expression:"form.commissionRate"}})],1),t("el-form-item",{attrs:{label:"是否启用"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.isEnabled,callback:function(t){e.$set(e.form,"isEnabled",t)},expression:"form.isEnabled"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)])},l=[],o=r(9550),s={name:"TeacherLevelManagement",data(){return{loading:!1,list:[],dialogVisible:!1,dialogTitle:"新增等级",form:{id:null,levelKey:"junior",displayName:"初级",hourlyRate:0,isEnabled:1,remark:""}}},mounted(){this.loadList()},methods:{async loadList(){this.loading=!0;try{const e=await(0,o.S9)();200===e.code&&(this.list=e.data||[])}finally{this.loading=!1}},openDialog(e){e?(this.dialogTitle="编辑等级",this.form={...e}):(this.dialogTitle="新增等级",this.form={id:null,levelKey:"junior",displayName:"初级",hourlyRate:0,commissionRate:15,isEnabled:1,remark:""}),this.dialogVisible=!0},async submit(){try{this.form.id?await(0,o._Y)(this.form.id,this.form):await(0,o.jX)(this.form),this.$message.success("保存成功"),this.dialogVisible=!1,this.loadList()}catch(e){this.$message.error("保存失败")}},async handleDelete(e){try{await this.$confirm("确认删除该等级配置？","提示",{type:"warning"}),await(0,o.s_)(e.id),this.$message.success("删除成功"),this.loadList()}catch(t){"cancel"!==t&&this.$message.error("删除失败")}}}},i=s,n=r(1656),u=(0,n.A)(i,a,l,!1,null,"1cd194aa",null),c=u.exports},9550:function(e,t,r){r.d(t,{E8:function(){return u},MF:function(){return m},S9:function(){return l},Wd:function(){return n},_Y:function(){return s},jX:function(){return o},kY:function(){return c},s_:function(){return i}});var a=r(6879);function l(){return(0,a.A)({url:"/system/teacher-level/list",method:"get"})}function o(e){return(0,a.A)({url:"/system/teacher-level",method:"post",data:e})}function s(e,t){return(0,a.A)({url:`/system/teacher-level/${e}`,method:"put",data:t})}function i(e){return(0,a.A)({url:`/system/teacher-level/${e}`,method:"delete"})}const n={list(){return(0,a.A)({url:"/system/learning-system/list",method:"get"})},create(e){return(0,a.A)({url:"/system/learning-system",method:"post",data:e})},update(e,t){return(0,a.A)({url:`/system/learning-system/${e}`,method:"put",data:t})},remove(e){return(0,a.A)({url:`/system/learning-system/${e}`,method:"delete"})}},u={current(){return(0,a.A)({url:"/system/lesson-price/current",method:"get"})},save(e){return(0,a.A)({url:"/system/lesson-price/save",method:"post",data:e})}},c={list(e){return(0,a.A)({url:"/system/course-banner/list",method:"get",params:e})},create(e){return(0,a.A)({url:"/system/course-banner",method:"post",data:e})},update(e,t){return(0,a.A)({url:`/system/course-banner/${e}`,method:"put",data:t})},remove(e){return(0,a.A)({url:`/system/course-banner/${e}`,method:"delete"})}},m={list(e){return(0,a.A)({url:"/course-category/list",method:"get",params:e})},tree(){return(0,a.A)({url:"/course-category/tree",method:"get"})},topLevel(){return(0,a.A)({url:"/course-category/top-level",method:"get"})},detail(e){return(0,a.A)({url:`/course-category/${e}`,method:"get"})},create(e){return(0,a.A)({url:"/course-category",method:"post",data:e})},update(e,t){return(0,a.A)({url:`/course-category/${e}`,method:"put",data:t})},updateStatus(e,t){return(0,a.A)({url:`/course-category/${e}/status`,method:"post",params:{status:t}})},updateSort(e,t){return(0,a.A)({url:`/course-category/${e}/sort`,method:"post",params:{sortOrder:t}})},move(e,t){return(0,a.A)({url:`/course-category/${e}/move`,method:"post",params:{newParentId:t}})},delete(e){return(0,a.A)({url:`/course-category/${e}`,method:"delete"})},batchDelete(e){return(0,a.A)({url:"/course-category/batch",method:"delete",data:e})},checkCode(e,t){return(0,a.A)({url:"/course-category/check-code",method:"get",params:{categoryCode:e,excludeId:t}})},checkName(e,t,r){return(0,a.A)({url:"/course-category/check-name",method:"get",params:{categoryName:e,parentId:t,excludeId:r}})}}}}]);