<!--pages/student/profile/profile.wxml-->
<view class="profile-container">
  <!-- é¡µé¢èƒŒæ™¯å›¾ -->
  <view class="background-gradient">
    <image class="background-image" src="/images/profile/bg.png" mode="scaleToFill"></image>
  </view>
  
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-profile-section">
    <view class="user-avatar">
      <!-- ğŸ‘¤ ç”¨æˆ·å¤´åƒ åœ†å½¢ 120rpx Ã— 120rpx -->
      <image class="avatar-image" src="{{userProfile.avatar}}" mode="aspectFill"></image>
    </view>
    
    <view class="user-info">
      <view class="user-name-row">
        <text class="user-name">{{userProfile.name}}</text>
        <image class="gender-icon" wx:if="{{userProfile.gender}}" src="{{userProfile.gender==='â™€' ? '/images/student/female.png' : '/images/student/male.png'}}" mode="widthFix"></image>
        <view class="tag student-tag" wx:if="{{userProfile.certification}}">{{userProfile.certification}}</view>
      </view>
  <!-- ç”¨æˆ·ç®€ä»‹ -->
  <!-- <view class="bio-section">
    <text class="bio-text">{{userProfile.bio}}</text>
  </view> -->
      
    </view>
  </view>
  <!-- å­¦ç”Ÿç»Ÿè®¡ï¼šæ”¾åœ¨ç®€ä»‹ä¸‹é¢ -->
  <view class="stats-row compact">
    <view class="stat-item" bindtap="goMyCourses" hover-class="stat-item-hover">
      <text class="stat-number">{{userProfile.myCourses}}</text>
      <text class="stat-label">æˆ‘çš„è¯¾ç¨‹</text>
    </view>
    <view class="stat-item stat-item-border">
      <text class="stat-number">{{userProfile.followedTeachers}}</text>
      <text class="stat-label">å…³æ³¨è€å¸ˆ</text>
    </view>
  </view>




  <!-- å­¦ç”Ÿç«¯æ— ä½™é¢ï¼Œç§»é™¤è¯¥æ¨¡å— -->

  <!-- æˆ‘çš„åŠŸèƒ½ -->
  <view class="my-functions-section">
    <view class="section-title">
      <view class="title-bar"></view>
      <text class="title-text">æˆ‘çš„åŠŸèƒ½</text>
    </view>
    
    <view class="functions-grid">
      <view class="function-item" wx:for="{{myFunctions}}" wx:key="id" bindtap="onFunctionTap" data-action="{{item.action}}">
        <view class="function-icon-wrapper">
          <image class="function-icon" src="{{item.iconSrc}}" mode="aspectFit"></image>
          <!-- æ¶ˆæ¯é€šçŸ¥çº¢ç‚¹ -->
          <badge-indicator 
            wx:if="{{item.action === 'notifications'}}"
            badge-key="{{item.action}}"
            visible="{{badgeStatus[item.action] && badgeStatus[item.action].visible}}"
            count="{{badgeStatus[item.action] ? badgeStatus[item.action].count : 0}}"
            size="small">
          </badge-indicator>
        </view>
        <text class="function-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- å­¦ç”ŸæœåŠ¡ -->
  <view class="teacher-services-section">
    <view class="section-title">
      <view class="title-bar"></view>
      <text class="title-text">å­¦ç”ŸæœåŠ¡</text>
    </view>
    
    <view class="services-grid">
      <view class="service-item" wx:for="{{studentServices}}" wx:key="id" bindtap="onServiceTap" data-action="{{item.action}}">
        <view class="service-icon-wrapper">
          <image class="service-icon" src="{{item.iconSrc}}" mode="aspectFit"></image>
          <!-- é€šç”¨çº¢ç‚¹ç»„ä»¶ -->
          <badge-indicator 
            badge-key="{{item.action}}"
            visible="{{badgeStatus[item.action] && badgeStatus[item.action].visible}}"
            count="{{badgeStatus[item.action] ? badgeStatus[item.action].count : 0}}"
            size="medium">
          </badge-indicator>
        </view>
        <text class="service-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- ä½¿ç”¨è§’è‰²åº•éƒ¨å¯¼èˆª -->
  <role-tabbar></role-tabbar>
</view>