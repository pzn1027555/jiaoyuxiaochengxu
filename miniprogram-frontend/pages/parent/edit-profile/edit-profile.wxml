<!-- 家长个人信息编辑页面 -->
<view class="edit-profile-container">
  <custom-header title="个人信息" bind:headerReady="onHeaderReady"></custom-header>

  <view class="content-container" style="padding-top: {{headerHeight}}px;">

    <!-- 个人信息表单 -->
    <view class="profile-form">

      <!-- 头像 -->
      <view class="form-item avatar-item" bindtap="selectAvatar">
        <text class="form-label">头像</text>
        <view class="form-value-container">
          <view class="avatar-container">
            <image class="avatar-image" src="{{userProfile.avatar || '/images/workspace/default-avatar.png'}}" mode="aspectFill"></image>
            <image class="arrow-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
          </view>
        </view>
      </view>

      <!-- 姓名 -->
      <view class="form-item" bindtap="editDetailName">
        <text class="form-label">姓名</text>
        <view class="form-value-container">
          <text class="form-value">{{userProfile.name || '请输入姓名'}}</text>
          <image class="arrow-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
        </view>
      </view>

      <!-- 性别 -->
      <view class="form-item" bindtap="selectGender">
        <text class="form-label">性别</text>
        <view class="form-value-container">
          <text class="form-value">{{userProfile.gender || '请选择性别'}}</text>
          <image class="arrow-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
        </view>
      </view>

      <!-- 所在省市区 -->
      <view class="form-item">
        <text class="form-label">所在省市区</text>
        <picker mode="multiSelector" range="{{regionPickerRange}}" value="{{regionPickerValue}}" bindchange="onRegionChange" bindcolumnchange="onRegionColumnChange" bindcancel="onRegionCancel">
          <view class="form-value-container">
            <text class="form-value">{{regionText || '请选择所在地区'}}</text>
            <image class="arrow-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
          </view>
        </picker>
      </view>

      <!-- 详细地址 -->
      <view class="form-item" bindtap="editDetailAddress">
        <text class="form-label">详细地址</text>
        <view class="form-value-container">
          <text class="form-value">{{userProfile.detailAddress || '请输入详细地址'}}</text>
          <image class="arrow-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
        </view>
      </view>

    </view>

    <!-- 保存按钮 -->
    <view class="save-btn-container">
      <button class="save-btn" bindtap="saveProfile">保存</button>
    </view>

  </view>

  <!-- 复用姓名/地址弹窗 -->
  <view class="modal-overlay {{showAddressModal ? 'show' : ''}}" bindtap="hideAddressModal">
    <view class="address-modal" catchtap="preventClose">
      <view class="modal-header">
        <text class="modal-title">详细地址</text>
        <text class="modal-close" bindtap="hideAddressModal">×</text>
      </view>
      <view class="modal-content">
        <textarea class="address-textarea" value="{{tempDetailAddress}}" placeholder="请输入详细地址" bindinput="onDetailAddressInput" maxlength="200" auto-height></textarea>
      </view>
      <view class="modal-actions">
        <button class="modal-btn cancel-btn" bindtap="hideAddressModal">取消</button>
        <button class="modal-btn confirm-btn" bindtap="confirmDetailAddress">确定</button>
      </view>
    </view>
  </view>

  <view class="modal-overlay {{showNameModal ? 'show' : ''}}" bindtap="hideAddressModal">
    <view class="address-modal" catchtap="preventClose">
      <view class="modal-header">
        <text class="modal-title">姓名</text>
        <text class="modal-close" bindtap="hideNameModal">×</text>
      </view>
      <view class="modal-content">
        <textarea class="address-textarea" value="{{tempDetailName}}" placeholder="请输入姓名" bindinput="onDetailNameInput" maxlength="50" auto-height></textarea>
      </view>
      <view class="modal-actions">
        <button class="modal-btn cancel-btn" bindtap="hideNameModal">取消</button>
        <button class="modal-btn confirm-btn" bindtap="confirmDetailName">确定</button>
      </view>
    </view>
  </view>
</view>
