<!--pages/teacher/profile/profile.wxml-->
<view class="profile-container">
  <!-- é¡µé¢èƒŒæ™¯å›¾ -->
  <view class="background-gradient">
    <image class="background-image" src="/images/profile/bg.png" mode="scaleToFill"></image>
  </view>
  
  <!-- é¡¶éƒ¨æ“ä½œåŒºåŸŸ -->
  <!-- <view class="header-actions">
    <view class="menu-icon" bindtap="showMenu">
      <view class="menu-dots">
        <view class="dot"></view>
        <view class="dot"></view>
        <view class="dot"></view>
      </view>
    </view>
    <view class="switch-identity" bindtap="switchIdentity">
      <text>åˆ‡æ¢èº«ä»½</text>
      <view class="arrow-right">></view>
    </view>
  </view> -->

  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-profile-section">
    <view class="user-avatar">
      <!-- ğŸ‘¤ ç”¨æˆ·å¤´åƒ åœ†å½¢ 120rpx Ã— 120rpx -->
      <image class="avatar-image" src="{{userProfile.avatar}}" mode="aspectFill"></image>
    </view>
    
    <view class="user-info">
      <view class="user-name-row">
        <text class="user-name">{{userProfile.name}}</text>
        <image class="gender-icon" wx:if="{{userProfile.gender}}" src="{{userProfile.gender==='â™€' ? '/images/student/female.png' : '/images/student/male.png'}}" mode="widthFix"></image>
      </view>
      
      <view class="user-tags">
        <view class="tag teacher-tag" wx:if="{{userProfile.certification}}">{{userProfile.certification}}</view>
        <view class="tag examiner-tag" wx:if="{{userProfile.examiner}}">{{userProfile.examiner}}</view>
      </view>
      
      <view class="subjects-row">
        <text class="subjects-label">æ‰€æˆç§‘ç›®ï¼š</text>
        <text class="subjects-list">{{userProfile.subjects}}</text>
      </view>
      
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-label">ç²‰ä¸</text>
          <text class="stat-number">{{userProfile.followers}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">è·èµ</text>
          <text class="stat-number">{{userProfile.likes}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç”¨æˆ·ç®€ä»‹ -->
  <view class="bio-section">
    <text class="bio-text">{{userProfile.bio}}</text>
  </view>

  <!-- æ”¶å…¥æ¦‚è§ˆ -->
  <view class="income-overview">
    <image class="income-background" src="/images/profile/moneyBg.png" mode="scaleToFill"></image>
    <view class="income-content">
      <view class="income-header">
        <text class="income-title">æ”¶å…¥æ¦‚è§ˆï¼ˆå…ƒï¼‰</text>
        <view class="view-more" bindtap="viewIncomeDetails">
          <text>æŸ¥çœ‹</text>
          <image class="next-icon" src="/images/workspace/next.png" mode="aspectFit"></image>
        </view>
      </view>
      
      <view class="income-stats">
        <view class="income-item">
          <text class="income-amount">{{incomeData.month}}</text>
          <text class="income-label">æœ¬æœˆ</text>
        </view>
        <view class="income-item">
          <text class="income-amount total">{{incomeData.total}}</text>
          <text class="income-label">æ€»</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„åŠŸèƒ½ -->
  <view class="my-functions-section">
    <view class="section-title">
      <view class="title-bar"></view>
      <text class="title-text">æˆ‘çš„åŠŸèƒ½</text>
    </view>
    
    <view class="functions-grid">
      <view class="function-item" wx:for="{{myFunctions}}" wx:key="id" bindtap="onFunctionTap" data-action="{{item.action}}">
        <image class="function-icon" src="{{item.iconSrc}}" mode="aspectFit"></image>
        <text class="function-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- è€å¸ˆæœåŠ¡ -->
  <view class="teacher-services-section">
    <view class="section-title">
      <view class="title-bar"></view>
      <text class="title-text">è€å¸ˆæœåŠ¡</text>
    </view>
    
    <view class="services-grid">
      <view class="service-item" wx:for="{{teacherServices}}" wx:key="id" bindtap="onServiceTap" data-action="{{item.action}}">
        <view class="service-icon-wrapper">
          <image class="service-icon" src="{{item.iconSrc}}" mode="aspectFit"></image>
          <!-- çº¢ç‚¹ç»„ä»¶ -->
          <badge-indicator 
            wx:if="{{badgeStatus[item.action]}}"
            badge-key="{{item.action}}"
            visible="{{badgeStatus[item.action].visible}}"
            count="{{badgeStatus[item.action].count}}"
            size="medium">
          </badge-indicator>
        </view>
        <text class="service-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- ä½¿ç”¨é€šç”¨è§’è‰²åº•éƒ¨å¯¼èˆªï¼Œä¿æŒä¸å­¦ç”Ÿ/å®¶é•¿ä¸€è‡´çš„å±‚çº§è¡Œä¸º -->
  <role-tabbar></role-tabbar>
</view>